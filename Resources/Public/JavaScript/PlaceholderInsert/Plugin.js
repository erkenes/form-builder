(()=>{var re=Object.create;var y=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var se=Object.getPrototypeOf,ne=Object.prototype.hasOwnProperty;var i=(e,t)=>()=>(e&&(t=e(e=0)),t);var f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var C=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of oe(t))!ne.call(e,s)&&s!==r&&y(e,s,{get:()=>t[s],enumerable:!(o=A(t,s))||o.enumerable});return e};var u=(e,t,r)=>(r=e!=null?re(se(e)):{},C(t||!e||!e.__esModule?y(r,"default",{value:e,enumerable:!0}):r,e)),ie=e=>C(y({},"__esModule",{value:!0}),e),O=(e,t,r,o)=>{for(var s=o>1?void 0:o?A(t,r):t,c=e.length-1,a;c>=0;c--)(a=e[c])&&(s=(o?a(t,r,s):a(s))||s);return o&&s&&y(t,r,s),s};var I=i(()=>{});var S=i(()=>{I()});function n(e){return(...t)=>{if(window["@Neos:HostPluginAPI"]&&window["@Neos:HostPluginAPI"][`@${e}`])return window["@Neos:HostPluginAPI"][`@${e}`](...t);throw new Error("You are trying to read from a consumer api that hasn't been initialized yet!")}}var p=i(()=>{});var R=i(()=>{});var _=i(()=>{});var b=i(()=>{R();_()});var T=i(()=>{b()});var E=i(()=>{b();T()});var W,j=i(()=>{S();p();E();W=n("manifest")});var B=f((je,v)=>{p();v.exports=n("vendor")().reactRedux});var M=f((Be,K)=>{p();K.exports=n("NeosProjectPackages")().ReactUiComponents});var $=f((Me,V)=>{p();V.exports=n("vendor")().React});var U=f(($e,D)=>{p();D.exports=n("NeosProjectPackages")().NeosUiDecorators});var H=f((Ue,k)=>{p();k.exports=n("NeosProjectPackages")().NeosUiReduxStore});var Y,q,x,z,N,L,d,G=i(()=>{Y=u(B()),q=u(M()),x=u($()),z=u(U()),N=u(H()),L=e=>{if(typeof e!="string")return console.error("`contextPath` must be a string!"),null;let[t,r]=e.split("@");return t.length===0?null:`${t.substr(0,t.lastIndexOf("/"))}@${r}`},d=class extends x.PureComponent{constructor(){super(...arguments);this.handleOnSelect=r=>{this.props.executeCommand("placeholderInsert",r)}}render(){let[r,o]=L(L(this.props.focusedNode.contextPath)).split("@"),s=`${r}/elements@${o}`,c=this.props.nodesByContextPath[s];if(!c)return null;let a=this.getOptionsRecursively(c.children);if(a.length===0)return null;let g=this.props.i18nRegistry.translate("Neos.Form.Builder:Main:placeholder","Insert placeholder");return x.default.createElement(q.SelectBox,{placeholder:g,options:a,onValueChange:this.handleOnSelect,value:null})}getOptionsRecursively(r){let{frontendConfiguration:o}=this.props,s=o.get("Neos.Form.Builder:PlaceholderInsert").ignoreNodeTypeInDropdown,c=o.get("Neos.Form.Builder:PlaceholderInsert").ignoreAllChildNodesOfNodeTypeInDropdown,a=[];return r.forEach(g=>{let l=this.props.nodesByContextPath[g.contextPath];if(!l)return null;if(s.hasOwnProperty(l.nodeType)&&s[l.nodeType]===!0||a.push({value:l.properties.identifier||l.identifier,label:l.properties.label||l.properties.identifier||l.identifier}),!(c.hasOwnProperty(l.nodeType)&&c[l.nodeType]===!0)){let ee=this.props.nodesByContextPath[g.contextPath].children,w=this.getOptionsRecursively(ee);Array.isArray(w)&&w.forEach(te=>{a.push(te)})}}),a}};d=O([(0,Y.connect)(e=>({nodesByContextPath:N.selectors.CR.Nodes.nodesByContextPathSelector(e),focusedNode:N.selectors.CR.Nodes.focusedSelector(e)})),(0,z.neos)(e=>({i18nRegistry:e.get("i18n"),nodeTypeRegistry:e.get("@neos-project/neos-ui-contentrepository"),frontendConfiguration:e.get("frontendConfiguration")}))],d)});var Q=f((Ye,J)=>{p();J.exports=n("vendor")().CkEditor5});var h,P,m,X=i(()=>{h=u(Q()),P=class extends h.Command{execute(t){let r=this.editor.model,s=r.document.selection,c=new h.ModelText("{"+t+"}");r.insertContent(c,s)}},m=class extends h.Plugin{static get pluginName(){return"PlaceholderInsert"}init(){this.editor.commands.add("placeholderInsert",new P(this.editor))}}});var le={};var ae,Z=i(()=>{j();G();X();ae=(e,t)=>(r,o)=>!t||t(o.editorOptions,o)?(r.plugins=r.plugins||[],{...r,plugins:[...r.plugins??[],e]}):r;W("Neos.Form.Builder:PlaceholderInsert",{},e=>{e.get("ckEditor5").get("richtextToolbar").set("placeholderInsertt",{component:d,isVisible:o=>o?.formatting?.placeholderInsert}),e.get("ckEditor5").get("config").set("placeholderInsert",ae(m,o=>o?.formatting?.placeholderInsert))})});Z();})();
//# sourceMappingURL=Plugin.js.map
